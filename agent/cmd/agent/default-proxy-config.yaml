# Default Discobot Proxy Configuration
# Embedded into the agent binary at build time and written to /.data/proxy/config.yaml on startup.

proxy:
  port: 17080
  api_port: 17081

tls:
  cert_dir: /.data/proxy/certs

# Docker registry caching enabled by default.
# Cache stored in project-scoped cache volume (shared across all sessions in project).
cache:
  enabled: true
  dir: /.data/cache/proxy
  max_size: 21474836480  # 20GB
  content_aware: true
  patterns:
    # Cloudflare R2 Docker registry storage (hash embedded as a path component, no OCI headers)
    - "^/registry-v2/docker/registry/v2/blobs/sha256/"

allowlist:
  enabled: false

headers: {}

logging:
  level: info
  format: text
